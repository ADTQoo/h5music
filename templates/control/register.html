<html>
<head>
	<title>注册 - By 李笑岩 </title>
	<style type="text/css">
		h1{color:"#FFFFFF";background-color:"#949494";text-align:left;height:30px;font-size:22px;margin-top:0;padding:10px;text-decoration:underline;}
		h2{color:"#FFFFFF";background-color:"#949494";text-align:center;height:30px;font-size:16px;margin-top:0;padding:10px;}
		form{font-size:20px;background-color:"D7D7D7";text-align:"left";}
		fieldset{padding-left:"100px"}
	</style>
</head>

<body>
	<marquee bgcolor = "949494" width = "100%" height = "50" behavior="scroll">
		<font size="18" color="FFFFFF">音  乐  吧</font>
	</marquee>
	<hr color="949494">
	<tr>
		<td>
			<span><a href="/">首页</a></span>
			<span>|</span>
			<span><a href="">推荐</a></span>
			<span>|</span>
			<span><a href="">历史</a></span>
			<span>|</span>
			<span><a href="/search/view">搜索</a></span>
			<span>|</span>
			<span>注册</span>
		</td>
	</tr>
	<hr>
	<form>
		<fieldset>
			<legend>注册</legend></br>
			用户名：<input id="user_name" name="username" size="20"/></br></br>
			密码：<input id="user_pass" type="password" name="password" size="20"/></br></br>
			<input id="reg" type="button" name="register" value="注册" size="20"/>
		</fieldset>
	</form>
	<hr color="949494">
	<hr size="60" color="949494">
</body>

<script src="/static/jquery-1.8.3.min.js"></script>
<script>

	$(function() {
		
		$("#reg").click(function() {
			var user_name = $('#user_name').val();
			var user_pass = $('#user_pass').val();

			if (user_name == '') {
				alert('请输入用户名!');
			} else if (user_pass == '') {
				alert('请输入密码!');
			} else {
				var url = '/control/user/register/' + user_name + '/' + user_pass;
				$.getJSON(url, function(data){
					
					var result = data['result'];
					if (result == 'success') {
						alert('注册成功!');
						window.location = '/';
					} else if (result == 'repeat') {
						alert('用户名已存在!');
					} else {
						alert('Oops... Something went wrong!');
					}
				});
			}
		});
	})

</script>
</html>
